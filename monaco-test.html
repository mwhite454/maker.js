<!DOCTYPE html>
<html>
<head>
    <title>Monaco Editor Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #container { width: 800px; height: 400px; border: 1px solid #ccc; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>Monaco Editor Test</h1>
    <div id="status" class="status info">Loading Monaco Editor...</div>
    <div id="container"></div>
    
    <script src="docs/external/monaco-editor/vs/loader.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        const container = document.getElementById('container');
        
        function updateStatus(message, type = 'info') {
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            console.log(message);
        }
        
        updateStatus('Configuring Monaco Editor loader...');
        
        require.config({ paths: { 'vs': 'docs/external/monaco-editor/vs' }});
        
        require(['vs/editor/editor.main'], function() {
            updateStatus('Monaco Editor loaded successfully!', 'success');
            
            // Test creating an editor
            try {
                const editor = monaco.editor.create(container, {
                    value: `// Monaco Editor Test - Modern JavaScript Features
const message = "Hello Monaco!";
let count = 0;

// Arrow function
const increment = () => ++count;

// Template literals
const greeting = \`\${message} Count: \${increment()}\`;

// Destructuring
const [first, ...rest] = [1, 2, 3, 4, 5];

// Spread operator
const combined = { ...{ a: 1 }, b: 2 };

// Class syntax
class TestClass {
    constructor(name) {
        this.name = name;
    }
    
    greet() {
        return \`Hello, \${this.name}!\`;
    }
}

// Export (ES6 modules)
export { TestClass, greeting };

console.log(greeting);`,
                    language: 'javascript',
                    theme: 'vs-dark',
                    automaticLayout: true,
                    minimap: { enabled: false }
                });
                
                updateStatus('✅ Monaco Editor created successfully with modern JavaScript syntax!', 'success');
                
                // Test that modern features are highlighted properly
                setTimeout(() => {
                    const model = editor.getModel();
                    if (model) {
                        updateStatus('✅ All tests passed! Monaco Editor is working with modern JavaScript features.', 'success');
                    }
                }, 1000);
                
            } catch (error) {
                updateStatus(`❌ Error creating Monaco Editor: ${error.message}`, 'error');
                console.error('Monaco Editor error:', error);
            }
        }, function(error) {
            updateStatus(`❌ Failed to load Monaco Editor: ${error}`, 'error');
            console.error('Monaco loading error:', error);
        });
    </script>
</body>
</html>
